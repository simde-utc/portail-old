var qq=function(e){"use strict";return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return t?e===t?!0:e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e)):!1},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){if(null==e.style)throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");return null!=t.opacity&&"string"!=typeof e.style.opacity&&"undefined"!=typeof e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t),this},hasClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return n.test(e.className)},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t){var n,r=[];return e.querySelectorAll?e.querySelectorAll("."+t):(n=e.getElementsByTagName("*"),qq.each(n,function(e,n){qq(n).hasClass(t)&&r.push(n)}),r)},children:function(){for(var t=[],n=e.firstChild;n;)1===n.nodeType&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")},hasAttribute:function(t){var n;return e.hasAttribute?e.hasAttribute(t)?null==/^false$/i.exec(e.getAttribute(t)):!1:(n=e[t],void 0===n?!1:null==/^false$/i.exec(n))}}};!function(){"use strict";qq.log=function(e,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e):window.console.log(e))},qq.isObject=function(e){return e&&!e.nodeType&&"[object Object]"===Object.prototype.toString.call(e)},qq.isFunction=function(e){return"function"==typeof e},qq.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)||window.ArrayBuffer&&e.buffer&&e.buffer.constructor===ArrayBuffer},qq.isItemList=function(e){return"[object DataTransferItemList]"===Object.prototype.toString.call(e)},qq.isNodeList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)||e.item&&e.namedItem},qq.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},qq.trimStr=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),n=e,r=n.indexOf("{}");return qq.each(t,function(e,t){var i=n.substring(0,r),s=n.substring(r+2);return n=i+t+s,r=n.indexOf("{}",r+t.length),0>r?!1:void 0}),n},qq.isFile=function(e){return window.File&&"[object File]"===Object.prototype.toString.call(e)},qq.isFileList=function(e){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(e)},qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)},qq.isInput=function(e){return window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(e)&&e.type&&"file"===e.type.toLowerCase()?!0:e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&"file"===e.type.toLowerCase()?!0:!1},qq.isBlob=function(e){return window.Blob&&"[object Blob]"===Object.prototype.toString.call(e)},qq.isXhrUploadSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return qq.log("XHR et ActiveX non supportes","error"),null}},qq.isFolderDropSupported=function(e){return e.items&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.android()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.sliceBlob=function(e,t,n){var r=e.slice||e.mozSlice||e.webkitSlice;return r.call(e,t,n)},qq.arrayBufferToHex=function(e){var t="",n=new Uint8Array(e);return qq.each(n,function(e,n){var r=n.toString(16);r.length<2&&(r="0"+r),t+=r}),t},qq.readBlobToHex=function(e,t,n){var r=qq.sliceBlob(e,t,t+n),i=new FileReader,s=new qq.Promise;return i.onload=function(){s.success(qq.arrayBufferToHex(i.result))},i.readAsArrayBuffer(r),s},qq.extend=function(e,t,n){return qq.each(t,function(t,r){n&&qq.isObject(r)?(void 0===e[t]&&(e[t]={}),qq.extend(e[t],r,!0)):e[t]=r}),e},qq.override=function(e,t){var n={},r=t(n);return qq.each(r,function(t,r){void 0!==e[t]&&(n[t]=e[t]),e[t]=r}),e},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var r=e.length;for(0>n&&(n+=r);r>n;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")},qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return-1!==navigator.userAgent.indexOf("Trident")&&-1!==navigator.userAgent.indexOf("rv:11")},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.each=function(e,t){var n,r;if(e)if(window.Storage&&e.constructor===window.Storage)for(n=0;n<e.length&&(r=t(e.key(n),e.getItem(e.key(n))),r!==!1);n++);else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e))for(n=0;n<e.length&&(r=t(n,e[n]),r!==!1);n++);else if(qq.isString(e))for(n=0;n<e.length&&(r=t(n,e.charAt(n)),r!==!1);n++);else for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&(r=t(n,e[n]),r===!1))break},qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){var r=qq.extend([],n);return arguments.length&&(r=r.concat(Array.prototype.slice.call(arguments))),e.apply(t,r)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(e,t,n){var r=[],i="&",s=function(e,n){var i=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!==i&&"undefined"!==n&&r.push("object"==typeof e?qq.obj2url(e,i,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(i)+"="+encodeURIComponent(e()):encodeURIComponent(i)+"="+encodeURIComponent(e))};return!n&&t?(i=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",r.push(t),r.push(qq.obj2url(e))):"[object Array]"===Object.prototype.toString.call(e)&&"undefined"!=typeof e?qq.each(e,function(e,t){s(t,e)}):"undefined"!=typeof e&&null!==e&&"object"==typeof e?qq.each(e,function(e,t){s(t,e)}):r.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),t?r.join(i):r.join(i).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){return t||(t=new FormData),qq.each(e,function(e,r){e=n?n+"["+e+"]":e,qq.isObject(r)?qq.obj2FormData(r,t,e):qq.isFunction(r)?t.append(e,r()):t.append(e,r)}),t},qq.obj2Inputs=function(e,t){var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,r){n=document.createElement("input"),n.setAttribute("name",e),n.setAttribute("value",r),t.appendChild(n)}}),t},qq.setCookie=function(e,t,n){var r=new Date,i="";n&&(r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toGMTString()),document.cookie=e+"="+t+i+"; path=/"},qq.getCookie=function(e){var t,n=e+"=",r=document.cookie.split(";");return qq.each(r,function(e,r){for(var i=r;" "==i.charAt(0);)i=i.substring(1,i.length);return 0===i.indexOf(n)?(t=i.substring(n.length,i.length),!1):void 0}),t},qq.getCookieNames=function(e){var t=document.cookie.split(";"),n=[];return qq.each(t,function(t,r){r=qq.trimStr(r);var i=r.indexOf("=");r.match(e)&&n.push(r.substr(0,i))}),n},qq.deleteCookie=function(e){qq.setCookie(e,"",-1)},qq.areCookiesEnabled=function(){var e=1e5*Math.random(),t="qqCookieTest:"+e;return qq.setCookie(t,1),qq.getCookie(t)?(qq.deleteCookie(t),!0):!1},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;return t>0?e.substr(t,e.length-t):void 0},qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do t=e.shift(),t&&t();while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}}}(),function(){"use strict";qq.Error=function(e){this.message=e},qq.Error.prototype=new Error}(),qq.version="4.1.1",qq.supportedFeatures=function(){"use strict";function e(){var e,t=!0;try{e=document.createElement("input"),e.type="file",qq(e).hide(),e.disabled&&(t=!1)}catch(n){t=!1}return t}function t(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)}function n(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)}function r(){if(window.XMLHttpRequest){var e=qq.createXhrInstance();return void 0!==e.withCredentials}return!1}function i(){return void 0!==window.XDomainRequest}function s(){return r()?!0:i()}function o(){return void 0!==document.createElement("input").webkitdirectory}var u,a,f,l,c,h,p,d,v,m,g,y;return u=e(),a=u&&qq.isXhrUploadSupported(),f=a&&t(),l=a&&qq.isFileChunkingSupported(),c=a&&l&&qq.areCookiesEnabled(),h=a&&n(),p=u&&(void 0!==window.postMessage||a),v=r(),d=i(),m=s(),g=o(),y=a&&void 0!==window.FileReader,{uploading:u,ajaxUploading:a,fileDrop:a,folderDrop:f,chunking:l,resume:c,uploadCustomHeaders:a,uploadNonMultipart:a,itemSizeValidation:a,uploadViaPaste:h,progressBar:a,uploadCors:p,deleteFileCorsXhr:v,deleteFileCorsXdr:d,deleteFileCors:m,canDetermineSize:a,folderSelection:g,imagePreviews:y,imageValidation:y,pause:l}}(),qq.Promise=function(){"use strict";var e,t,n=[],r=[],i=[],s=0;qq.extend(this,{then:function(i,o){return 0===s?(i&&n.push(i),o&&r.push(o)):-1===s&&o?o.apply(null,t):i&&i.apply(null,e),this},done:function(n){return 0===s?i.push(n):n.apply(null,void 0===t?e:t),this},success:function(){return s=1,e=arguments,n.length&&qq.each(n,function(t,n){n.apply(null,e)}),i.length&&qq.each(i,function(t,n){n.apply(null,e)}),this},failure:function(){return s=-1,t=arguments,r.length&&qq.each(r,function(e,n){n.apply(null,t)}),i.length&&qq.each(i,function(e,n){n.apply(null,t)}),this}})},qq.UploadButton=function(e){"use strict";function t(){var e=document.createElement("input");return e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,r),s.multiple&&e.setAttribute("multiple",""),s.folders&&qq.supportedFeatures.folderSelection&&e.setAttribute("webkitdirectory",""),s.acceptFiles&&e.setAttribute("accept",s.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",s.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),s.element.appendChild(e),i.attach(e,"change",function(){s.onChange(e)}),i.attach(e,"mouseover",function(){qq(s.element).addClass(s.hoverClass)}),i.attach(e,"mouseout",function(){qq(s.element).removeClass(s.hoverClass)}),i.attach(e,"focus",function(){qq(s.element).addClass(s.focusClass)}),i.attach(e,"blur",function(){qq(s.element).removeClass(s.focusClass)}),window.attachEvent&&e.setAttribute("tabIndex","-1"),e}var n,r,i=new qq.DisposeSupport,s={element:null,multiple:!1,acceptFiles:null,folders:!1,name:"qqfile",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(s,e),r=qq.getUniqueId(),qq(s.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),n=t(),qq.extend(this,{getInput:function(){return n},getButtonId:function(){return r},setMultiple:function(e){e!==s.multiple&&(e?n.setAttribute("multiple",""):n.removeAttribute("multiple"))},setAcceptFiles:function(e){e!==s.acceptFiles&&n.setAttribute("accept",e)},reset:function(){n.parentNode&&qq(n).remove(),qq(s.element).removeClass(s.focusClass),n=t()}})},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(e){"use strict";function t(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(i[s[n]])}),t}return i[s[e]]}function n(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(i[o[n]])}),t}return i[o[e]]}function r(e){var t=[],n=[].concat(e);return qq.each(n,function(e,n){var r=u[n];void 0!==r&&qq.each(r,function(e,n){t.push(i[n])})}),t}var i=[],s={},o={},u={};qq.extend(this,{added:function(t){var n=e.getUuid(t),r=e.getName(t),l=e.getSize(t),c=qq.status.SUBMITTING,p=i.push({id:t,name:r,originalName:r,uuid:n,size:l,status:c})-1;s[t]=p,o[n]=p,void 0===u[c]&&(u[c]=[]),u[c].push(p),e.onStatusChange(t,void 0,c)},retrieve:function(e){return qq.isObject(e)&&i.length?void 0!==e.id?t(e.id):void 0!==e.uuid?n(e.uuid):e.status?r(e.status):void 0:qq.extend([],i,!0)},reset:function(){i=[],s={},o={},u={}},setStatus:function(t,n){var r=s[t],o=i[r].status,l=qq.indexOf(u[o],r);u[o].splice(l,1),i[r].status=n,void 0===u[n]&&(u[n]=[]),u[n].push(r),e.onStatusChange(t,o,n)},uuidChanged:function(e,t){var n=s[e],r=i[n].uuid;i[n].uuid=t,o[t]=n,delete o[r]},nameChanged:function(e,t){var n=s[e];i[n].name=t}})},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},function(){"use strict";qq.basePublicApi={log:function(e,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[FineUploader "+qq.version+"] "+e,t):qq.log("[FineUploader "+qq.version+"] "+e)},setParams:function(e,t){null==t?this._options.request.params=e:this._paramsStore.setParams(e,t)},setDeleteFileParams:function(e,t){null==t?this._options.deleteFile.params=e:this._deleteFileParamsStore.setParams(e,t)},setEndpoint:function(e,t){null==t?this._options.request.endpoint=e:this._endpointStore.setEndpoint(e,t)},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getNetUploads:function(){return this._netUploaded},uploadStoredFiles:function(){var e;if(0===this._storedIds.length)this._itemError("noFilesError");else for(;this._storedIds.length;)e=this._storedIds.shift(),this._handler.upload(e)},clearStoredFiles:function(){this._storedIds=[]},retry:function(e){return this._manualRetry(e)},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds),qq.each(e,function(e,n){t.cancel(n)}),this._handler.cancelAll()},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],qq.each(this._buttons,function(e,t){t.reset()}),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset()},addFiles:function(e,t,n){var r,i,s,o=this,u=[];if(e){for(qq.isFileList(e)||(e=[].concat(e)),r=0;r<e.length;r+=1)if(i=e[r],qq.isFileOrInput(i))if(qq.isInput(i)&&qq.supportedFeatures.ajaxUploading)for(s=0;s<i.files.length;s++)u.push(i.files[s]);else u.push(i);else o.log(i+" is not a File or INPUT element!  Ignoring!","warn");this.log("Received "+u.length+" files or inputs."),this._prepareItemsForUpload(u,t,n)}},addBlobs:function(e,t,n){if(e){var r=[].concat(e),i=[],s=this;qq.each(r,function(e,t){qq.isBlob(t)&&!qq.isFileOrInput(t)?i.push({blob:t,name:s._options.blobs.defaultName}):qq.isObject(t)&&t.blob&&t.name?i.push(t):s.log("addBlobs: entry at index "+e+" is not a Blob or a BlobData object","error")}),this._prepareItemsForUpload(i,t,n)}else this.log("undefined or non-array parameter passed into addBlobs","error")},getUuid:function(e){return this._handler.getUuid(e)},setUuid:function(e,t){return this._handler.setUuid(e,t)},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._handler.getSize(e)},getName:function(e){return this._handler.getName(e)},setName:function(e,t){this._handler.setName(e,t),this._uploadData.nameChanged(e,t)},getFile:function(e){return this._handler.getFile(e)},deleteFile:function(e){this._onSubmitDelete(e)},setDeleteFileEndpoint:function(e,t){null==t?this._options.deleteFile.endpoint=e:this._deleteFileEndpointStore.setEndpoint(e,t)},doesExist:function(e){return this._handler.isValid(e)},getUploads:function(e){return this._uploadData.retrieve(e)},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])},drawThumbnail:function(e,t,n,r){if(this._imageGenerator){var i=this._thumbnailUrls[e],s={scale:n>0,maxSize:n>0?n:null};return!r&&qq.supportedFeatures.imagePreviews&&(i=this.getFile(e)),null==i?(new qq.Promise).failure(t,"Fichier ou URL non trouves."):this._imageGenerator.generate(i,t,s)}},pauseUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],t.status)>=0){if(this._handler.pause(e))return this._uploadData.setStatus(e,qq.status.PAUSED),!0;qq.log(qq.format("Unable to pause file ID {} ({}).",e,this.getName(e)),"error")}else qq.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",e,this.getName(e)),"error");return!1},continueUpload:function(e){var t=this._uploadData.retrieve({id:e});return qq.supportedFeatures.pause&&this._options.chunking.enabled?t.status===qq.status.PAUSED?(qq.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",e,this.getName(e))),this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED),!0):(qq.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",e,this.getName(e)),"error"),!1):!1},getRemainingAllowedItems:function(){var e=this._options.validation.itemLimit;return e>0?this._options.validation.itemLimit-this._netUploadedOrQueued:null}},qq.basePrivateApi={_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,function(t,n){var r=n.multiple,i=qq.extend({},e._options.validation,!0),s=qq.extend({},n);void 0===r&&(r=e._options.multiple),s.validation&&qq.extend(i,n.validation,!0),qq.extend(s,{multiple:r,validation:i},!0),e._initExtraButton(s)})},_initExtraButton:function(e){var t=this._createUploadButton({element:e.element,multiple:e.multiple,accept:e.validation.acceptFiles,folders:e.folders,allowedExtensions:e.validation.allowedExtensions});this._extraButtonSpecs[t.getButtonId()]=e},_getButtonId:function(e){var t,n;if(e&&!e.blob&&!qq.isBlob(e)){if(qq.isFile(e))return e.qqButtonId;if("input"===e.tagName.toLowerCase()&&"file"===e.type.toLowerCase())return e.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(t=e.getElementsByTagName("input"),qq.each(t,function(e,t){return"file"===t.getAttribute("type")?(n=t,!1):void 0}),n)return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_annotateWithButtonId:function(e,t){qq.isFile(e)&&(e.qqButtonId=this._getButtonId(t))},_getButton:function(e){var t=this._extraButtonSpecs[e];return t?t.element:e===this._defaultButtonId?this._options.button:void 0},_handleCheckedCallback:function(e){var t=this,n=e.callback();return n instanceof qq.Promise?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),n.then(function(n){t.log(e.name+" promise success for "+e.identifier),e.onSuccess(n)},function(){e.onFailure?(t.log(e.name+" promise failure for "+e.identifier),e.onFailure()):t.log(e.name+" promise failure for "+e.identifier)})):(n!==!1?e.onSuccess(n):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),n)},_createUploadButton:function(e){function t(){return qq.supportedFeatures.ajaxUploading?qq.ios7()&&n._isAllowedExtension(i,".mov")?!1:void 0===e.multiple?n._options.multiple:e.multiple:!1}var n=this,r=e.accept||this._options.validation.acceptFiles,i=e.allowedExtensions||this._options.validation.allowedExtensions,s=new qq.UploadButton({element:e.element,folders:e.folders,name:this._options.request.inputName,multiple:t(),acceptFiles:r,onChange:function(e){n._onInputChange(e)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus});return this._disposeSupport.addDisposer(function(){s.dispose()}),n._buttons.push(s),s},_createUploadHandler:function(e,t){var n=this,r={debug:this._options.debug,maxConnections:this._options.maxConnections,inputName:this._options.request.inputName,cors:this._options.cors,demoMode:this._options.demoMode,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(n.log,n),onProgress:function(e,t,r,i){n._onProgress(e,t,r,i),n._options.callbacks.onProgress(e,t,r,i)},onComplete:function(e,t,r,i){var s=n._onComplete(e,t,r,i);s instanceof qq.Promise?s.done(function(){n._options.callbacks.onComplete(e,t,r,i)}):n._options.callbacks.onComplete(e,t,r,i)},onCancel:function(e,t){return n._handleCheckedCallback({name:"onCancel",callback:qq.bind(n._options.callbacks.onCancel,n,e,t),onSuccess:qq.bind(n._onCancel,n,e,t),identifier:e})},onUpload:function(e,t){n._onUpload(e,t),n._options.callbacks.onUpload(e,t)},onUploadChunk:function(e,t,r){n._onUploadChunk(e,r),n._options.callbacks.onUploadChunk(e,t,r)},onUploadChunkSuccess:function(){n._options.callbacks.onUploadChunkSuccess.apply(n,arguments)},onResume:function(e,t,r){return n._options.callbacks.onResume(e,t,r)},onAutoRetry:function(){return n._onAutoRetry.apply(n,arguments)},onUuidChanged:function(e,t){n._uploadData.uuidChanged(e,t)}};return qq.each(this._options.request,function(e,t){r[e]=t}),e&&qq.each(e,function(e,t){r[e]=t}),new qq.UploadHandler(r,t)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._options.deleteFile.customHeaders,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:qq.bind(e.log,e),onDelete:function(t){e._onDelete(t),e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,r){e._onDeleteComplete(t,n,r),e._options.callbacks.onDeleteComplete(t,n,r)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(e.log,e),pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,r){e._onUploadStatusChange(t,n,r),e._options.callbacks.onStatusChange(t,n,r)}})},_onUploadStatusChange:function(e,t,n){n===qq.status.PAUSED&&clearTimeout(this._retryTimeouts[e])},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],r=t;null==r&&(r=this._options.paste.defaultName),r+="."+n,this.addBlobs({name:r,blob:e})},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",function(t){return e.getInProgress()?(t=t||window.event,t.returnValue=e._options.messages.onLeave,e._options.messages.onLeave):void 0})},_onSubmit:function(){this._netUploadedOrQueued++},_onProgress:function(){},_onComplete:function(e,t,n,r){return n.success?(n.thumbnailUrl&&(this._thumbnailUrls[e]=n.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED)),this._maybeParseAndSendUploadError(e,t,n,r),n.success?!0:!1},_onCancel:function(e){this._netUploadedOrQueued--,clearTimeout(this._retryTimeouts[e]);var t=qq.indexOf(this._storedIds,e);!this._options.autoUpload&&t>=0&&this._storedIds.splice(t,1),this._uploadData.setStatus(e,qq.status.CANCELED)},_isDeletePossible:function(){return qq.DeleteFileAjaxRequester&&this._options.deleteFile.enabled?this._options.cors.expected?qq.supportedFeatures.deleteFileCorsXhr?!0:qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr?!0:!1:!0:!1},_onSubmitDelete:function(e,t,n){var r,i=this.getUuid(e);return t&&(r=qq.bind(t,this,e,i,n)),this._isDeletePossible()?this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:r||qq.bind(this._deleteHandler.sendDelete,this,e,i,n),identifier:e}):(this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){var r=this._handler.getName(e);n?(this._uploadData.setStatus(e,qq.status.DELETE_FAILED),this.log("Delete request for '"+r+"' has failed.","error"),void 0===t.withCredentials?this._options.callbacks.onError(e,r,"Delete request failed",t):this._options.callbacks.onError(e,r,"Delete request failed with response code "+t.status,t)):(this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(e),this._uploadData.setStatus(e,qq.status.DELETED),this.log("Delete request for '"+r+"' has succeeded."))},_onUpload:function(e){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onUploadChunk:function(){},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++)this._annotateWithButtonId(e.files[t],e);this.addFiles(e.files)}else e.value.length>0&&this.addFiles(e);qq.each(this._buttons,function(e,t){t.reset()})},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onAutoRetry:function(e,t,n,r,i){var s=this;return s._preventRetries[e]=n[s._options.retry.preventRetryResponseProperty],s._shouldAutoRetry(e,t,n)?(s._maybeParseAndSendUploadError.apply(s,arguments),s._options.callbacks.onAutoRetry(e,t,s._autoRetries[e]+1),s._onBeforeAutoRetry(e,t),s._retryTimeouts[e]=setTimeout(function(){s.log("Retrying "+t+"..."),s._autoRetries[e]++,s._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),i?i(e):s._handler.retry(e)},1e3*s._options.retry.autoAttemptDelay),!0):void 0},_shouldAutoRetry:function(e){var t=this._uploadData.retrieve({id:e});return!this._preventRetries[e]&&this._options.retry.enableAuto&&t.status!==qq.status.PAUSED?(void 0===this._autoRetries[e]&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts):!1},_onBeforeManualRetry:function(e){var t=this._options.validation.itemLimit;if(this._preventRetries[e])return this.log("Retries are forbidden for id "+e,"warn"),!1;if(this._handler.isValid(e)){var n=this._handler.getName(e);return this._options.callbacks.onManualRetry(e,n)===!1?!1:t>0&&this._netUploadedOrQueued+1>t?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+n+"' (id: "+e+")..."),!0)}return this.log("'"+e+"' is not a valid file ID","error"),!1},_manualRetry:function(e,t){return this._onBeforeManualRetry(e)?(this._netUploadedOrQueued++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),t?t(e):this._handler.retry(e),!0):void 0},_maybeParseAndSendUploadError:function(e,t,n,r){if(!n.success)if(r&&200!==r.status&&!n.error)this._options.callbacks.onError(e,t,"XHR returned response code "+r.status,r);else{var i=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,i,r)}},_prepareItemsForUpload:function(e,t,n){var r=this._getValidationDescriptors(e),i=this._getButtonId(e[0]),s=this._getButton(i);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,r,s),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,r,e,t,n,s),identifier:"batch validation"})},_upload:function(e,t,n){var r=this._handler.add(e),i=this._handler.getName(r);this._uploadData.added(r),t&&this.setParams(t,r),n&&this.setEndpoint(n,r),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,r,i),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,r,i),onFailure:qq.bind(this._fileOrBlobRejected,this,r,i),identifier:r})},_onSubmitCallbackSuccess:function(e){var t;t=qq.supportedFeatures.ajaxUploading?this._handler.getFile(e).qqButtonId:this._getButtonId(this._handler.getInput(e)),t&&(this._buttonIdsForFileIds[e]=t),this._onSubmit.apply(this,arguments),this._uploadData.setStatus(e,qq.status.SUBMITTED),this._onSubmitted.apply(this,arguments),this._options.callbacks.onSubmitted.apply(this,arguments),this._options.autoUpload?this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED):this._storeForLater(e)},_onSubmitted:function(){},_storeForLater:function(e){this._storedIds.push(e)},_onValidateBatchCallbackSuccess:function(e,t,n,r,i){var s,o=this._options.validation.itemLimit,u=this._netUploadedOrQueued+e.length;0===o||o>=u?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],i),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,r),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,r),identifier:"Item '"+t[0].name+"', size: "+t[0].size}):this._itemError("noFilesError"):(s=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,u).replace(/\{itemLimit\}/g,o),this._batchError(s))},_onValidateCallbackSuccess:function(e,t,n,r){var i=this,s=t+1,o=this._getValidationDescriptor(e[t]);this._validateFileOrBlobData(e[t],o).then(function(){i._upload(e[t],n,r),i._maybeProcessNextItemAfterOnValidateCallback(!0,e,s,n,r)},function(){i._maybeProcessNextItemAfterOnValidateCallback(!1,e,s,n,r)})},_onValidateCallbackFailure:function(e,t,n,r){var i=t+1;this._fileOrBlobRejected(null,e[0].name),this._maybeProcessNextItemAfterOnValidateCallback(!1,e,i,n,r)},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,r,i){var s=this;t.length>n&&(e||!this._options.validation.stopOnFirstInvalidFile)&&setTimeout(function(){var e=s._getValidationDescriptor(t[n]);s._handleCheckedCallback({name:"onValidate",callback:qq.bind(s._options.callbacks.onValidate,s,t[n]),onSuccess:qq.bind(s._onValidateCallbackSuccess,s,t,n,r,i),onFailure:qq.bind(s._onValidateCallbackFailure,s,t,n,r,i),identifier:"Item '"+e.name+"', size: "+e.size})},0)},_validateFileOrBlobData:function(e,t){var n=this,r=t.name,i=t.size,s=this._getButtonId(e),o=this._getValidationBase(s),u=new qq.Promise;return u.then(function(){},function(){n._fileOrBlobRejected(null,r)}),qq.isFileOrInput(e)&&!this._isAllowedExtension(o.allowedExtensions,r)?(this._itemError("typeError",r,e),u.failure()):0===i?(this._itemError("emptyError",r,e),u.failure()):i&&o.sizeLimit&&i>o.sizeLimit?(this._itemError("sizeError",r,e),u.failure()):i&&i<o.minSizeLimit?(this._itemError("minSizeError",r,e),u.failure()):(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(e)?(new qq.ImageValidation(e,qq.bind(n.log,n))).validate(o.image).then(u.success,function(t){n._itemError(t+"ImageError",r,e),u.failure()}):u.success(),u)},_fileOrBlobRejected:function(e){null!=e&&this._uploadData.setStatus(e,qq.status.REJECTED)},_itemError:function(e,t,n){function r(e,t){o=o.replace(e,t)}var i,s,o=this._options.messages[e],u=[],a=[].concat(t),f=a[0],l=this._getButtonId(n),c=this._getValidationBase(l);return qq.each(c.allowedExtensions,function(e,t){qq.isString(t)&&u.push(t)}),i=u.join(", ").toLowerCase(),r("{file}",this._options.formatFileName(f)),r("{extensions}",i),r("{sizeLimit}",this._formatSize(c.sizeLimit)),r("{minSizeLimit}",this._formatSize(c.minSizeLimit)),s=o.match(/(\{\w+\})/g),null!==s&&qq.each(s,function(e,t){r(t,a[e])}),this._options.callbacks.onError(null,f,o,void 0),o},_batchError:function(e){this._options.callbacks.onError(null,null,e,void 0)},_isAllowedExtension:function(e,t){var n=!1;return e.length?(qq.each(e,function(e,r){if(qq.isString(r)){var i=new RegExp("\\."+r+"$","i");if(null!=t.match(i))return n=!0,!1}}),n):!0},_formatSize:function(e){var t=-1;do e/=1e3,t++;while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_wrapCallbacks:function(){var e,t;e=this,t=function(t,n,r){try{return n.apply(e,r)}catch(i){e.log("Caught exception in '"+t+"' callback - "+i.message,"error")}};for(var n in this._options.callbacks)!function(){var r,i;r=n,i=e._options.callbacks[r],e._options.callbacks[r]=function(){return t(r,i,arguments)}}()},_parseFileOrBlobDataName:function(e){var t;return t=qq.isFileOrInput(e)?e.value?e.value.replace(/.*(\/|\\)/,""):null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name:e.name},_parseFileOrBlobDataSize:function(e){var t;return qq.isFileOrInput(e)?void 0===e.value&&(t=null!==e.fileSize&&void 0!==e.fileSize?e.fileSize:e.size):t=e.blob.size,t},_getValidationDescriptor:function(e){var t={},n=this._parseFileOrBlobDataName(e),r=this._parseFileOrBlobDataSize(e);return t.name=n,void 0!==r&&(t.size=r),t},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,function(e,r){n.push(t._getValidationDescriptor(r))}),n},_createParamsStore:function(e){var t={},n=this;return{setParams:function(e,n){var r={};qq.extend(r,e),t[n]=r},getParams:function(r){var i={};return null!=r&&t[r]?qq.extend(i,t[r]):qq.extend(i,n._options[e].params),i},remove:function(e){return delete t[e]},reset:function(){t={}}}},_createEndpointStore:function(e){var t={},n=this;return{setEndpoint:function(e,n){t[n]=e},getEndpoint:function(r){return null!=r&&t[r]?t[r]:n._options[e].endpoint},remove:function(e){return delete t[e]},reset:function(){t={}}}},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e="image/*;capture=camera",t=this._options.camera.button,n=t?this._getButtonId(t):this._defaultButtonId,r=this._options;n&&n!==this._defaultButtonId&&(r=this._extraButtonSpecs[n]),r.multiple=!1,null===r.validation.acceptFiles?r.validation.acceptFiles=e:r.validation.acceptFiles+=","+e,qq.each(this._buttons,function(e,t){return t.getButtonId()===n?(t.setMultiple(r.multiple),t.setAcceptFiles(r.acceptFiles),!1):void 0})}},_getValidationBase:function(e){var t=this._extraButtonSpecs[e];return t?t.validation:this._options.validation}}}(),function(){"use strict";qq.FineUploaderBasic=function(e){this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{endpoint:"/server/upload",params:{},paramsInBody:!0,customHeaders:{},forceMultipart:!0,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",filenameParam:"qqfilename"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0}},callbacks:{onSubmit:function(){},onSubmitted:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onUploadChunkSuccess:function(){},onResume:function(){},onProgress:function(){},onError:function(){},onAutoRetry:function(){},onManualRetry:function(){},onValidateBatch:function(){},onValidate:function(){},onSubmitDelete:function(){},onDelete:function(){},onDeleteComplete:function(){},onPasteReceived:function(){},onStatusChange:function(){}},messages:{typeError:"{file} a une extension non valide. Extensions : {extensions}.",sizeError:"{file} est trop large, la taille maximum est {sizeLimit}.",minSizeError:"{file} est trop petit, la taille minimum est {minSizeLimit}.",emptyError:"{file} est vide.",noFilesError:"Pas de fichiers a envoyer.",tooManyItemsError:"Trop de fichier a envoyer ({netItems}). La limite est de {itemLimit} fichiers.",maxHeightImageError:"L'image est trop haute.",maxWidthImageError:"L'image est trop large.",minHeightImageError:"L'image n'est pas assez haute.",minWidthImageError:"L'image n'est pas assez large.",retryFailTooManyItems:"Abandon de l'upload.",onLeave:"Envoie des photos en cours, si vous quittez maintenant l'envoie sera interrompu."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return void 0!==e&&e.length>33&&(e=e.slice(0,19)+"..."+e.slice(-14)),e},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[]},qq.extend(this._options,e,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._paramsStore=this._createParamsStore("request"),this._deleteFileParamsStore=this._createParamsStore("deleteFile"),this._endpointStore=this._createEndpointStore("request"),this._deleteFileEndpointStore=this._createEndpointStore("deleteFile"),this._handler=this._createUploadHandler(),this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(qq.PasteSupport?this._pasteHandler=this._createPasteHandler():qq.log("Paste support module not found","info")),this._preventLeaveInProgress(),this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this))},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}(),qq.AjaxRequester=function(e){"use strict";function t(){return qq.indexOf(["GET","POST","HEAD"],E.method)>=0}function n(){var e=!1;return qq.each(e,function(t,n){return qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],n)<0?(e=!0,!1):void 0}),e}function r(e){return E.cors.expected&&void 0===e.withCredentials}function i(){var e;return(window.XMLHttpRequest||window.ActiveXObject)&&(e=qq.createXhrInstance(),void 0===e.withCredentials&&(e=new XDomainRequest)),e}function s(e,t){var n=w[e].xhr;return n||t||(n=E.cors.expected?i():qq.createXhrInstance(),w[e].xhr=n),n}function o(e){var t,n=qq.indexOf(b,e),r=E.maxConnections;delete w[e],b.splice(n,1),b.length>=r&&r>n&&(t=b[r-1],f(t))}function u(e,t){var n=s(e),i=E.method,u=t===!0;o(e),u?g(i+" request for "+e+" has failed","error"):r(n)||v(n.status)||(u=!0,g(i+" request for "+e+" has failed - response code "+n.status,"error")),E.onComplete(e,n,u)}function a(e){var t,n=w[e].additionalParams,r=E.mandatedParams;return E.paramsStore.getParams&&(t=E.paramsStore.getParams(e)),n&&qq.each(n,function(e,n){t=t||{},t[e]=n}),r&&qq.each(r,function(e,n){t=t||{},t[e]=n}),t}function f(e){var t,n=s(e),i=E.method,o=a(e),u=w[e].payload;E.onSend(e),t=l(e,o),r(n)?(n.onload=h(e),n.onerror=p(e)):n.onreadystatechange=c(e),n.open(i,t,!0),E.cors.expected&&E.cors.sendCredentials&&!r(n)&&(n.withCredentials=!0),d(e),g("Sending "+i+" request for "+e),u?n.send(u):y||!o?n.send():o&&E.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?n.send(qq.obj2url(o,"")):o&&E.contentType.toLowerCase().indexOf("application/json")>=0?n.send(JSON.stringify(o)):n.send(o)}function l(e,t){var n=E.endpointStore.getEndpoint(e),r=w[e].addToPath;return void 0!=r&&(n+="/"+r),y&&t?qq.obj2url(t,n):n}function c(e){return function(){4===s(e).readyState&&u(e)}}function h(e){return function(){u(e)}}function p(e){return function(){u(e,!0)}}function d(e){var i=s(e),o=E.customHeaders,u=w[e].additionalHeaders||{},a=E.method,f={};r(i)||(E.allowXRequestedWithAndCacheControl&&(E.cors.expected&&t()&&!n(o)||(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Cache-Control","no-cache"))),!E.contentType||"POST"!==a&&"PUT"!==a||i.setRequestHeader("Content-Type",E.contentType),qq.extend(f,o),qq.extend(f,u),qq.each(f,function(e,t){i.setRequestHeader(e,t)}))}function v(e){return qq.indexOf(E.successfulResponseCodes[E.method],e)>=0}function m(e,t,n,r,i){w[e]={addToPath:t,additionalParams:n,additionalHeaders:r,payload:i};var s=b.push(e);s<=E.maxConnections&&f(e)}var g,y,b=[],w=[],E={validMethods:["POST"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],POST:[200,204]},cors:{expected:!1,sendCredentials:!1},log:function(){},onSend:function(){},onComplete:function(){},onCancel:function(){}};if(qq.extend(E,e),g=E.log,qq.indexOf(E.validMethods,E.method)<0)throw new Error("'"+E.method+"' is not a supported method for this type of request!");y="GET"===E.method||"DELETE"===E.method,qq.extend(this,{initTransport:function(e){var t,n,r,i;return{withPath:function(e){return t=e,this},withParams:function(e){return n=e,this},withHeaders:function(e){return r=e,this},withPayload:function(e){return i=e,this},send:function(){m(e,t,n,r,i)}}}})},qq.UploadHandler=function(e,t){"use strict";function n(e){var t,n=qq.indexOf(a,e),r=s.maxConnections;n>=0&&(a.splice(n,1),a.length>=r&&r>n&&(t=a[r-1],u.upload(t)))}function r(e){o("Cancelling "+e),s.paramsStore.remove(e),n(e)}function i(){var e=t?qq[t]:qq,r=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";u=new e["UploadHandler"+r](s,n,s.onUuidChanged,o)}var s,o,u,a=[];s={debug:!1,forceMultipart:!0,paramsInBody:!1,paramsStore:{},endpointStore:{},filenameParam:"qqfilename",cors:{expected:!1,sendCredentials:!1},maxConnections:3,uuidParam:"qquuid",totalFileSizeParam:"qqtotalfilesize",chunking:{enabled:!1,partSize:2e6,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalParts:"qqtotalparts",filename:"qqfilename"}},resume:{enabled:!1,id:null,cookiesExpireIn:7,paramNames:{resuming:"qqresume"}},log:function(){},onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onUploadChunk:function(){},onUploadChunkSuccess:function(){},onAutoRetry:function(){},onResume:function(){},onUuidChanged:function(){}},qq.extend(s,e),o=s.log,qq.extend(this,{add:function(e){return u.add(e)},upload:function(e){var t=a.push(e);return t<=s.maxConnections?(u.upload(e),!0):!1},retry:function(e){var t=qq.indexOf(a,e);return t>=0?u.upload(e,!0):this.upload(e)},cancel:function(e){var t=u.cancel(e);t instanceof qq.Promise?t.then(function(){r(e)}):t!==!1&&r(e)},cancelAll:function(){var e=this,t=[];qq.extend(t,a),qq.each(t,function(t,n){e.cancel(n)}),a=[]},getName:function(e){return u.getName(e)},setName:function(e,t){u.setName(e,t)},getSize:function(e){return u.getSize?u.getSize(e):void 0},getFile:function(e){return u.getFile?u.getFile(e):void 0},getInput:function(e){return u.getInput?u.getInput(e):void 0},reset:function(){o("Resetting upload handler"),this.cancelAll(),a=[],u.reset()},expunge:function(e){return u.expunge(e)},getUuid:function(e){return u.getUuid(e)},setUuid:function(e,t){return u.setUuid(e,t)},isValid:function(e){return u.isValid(e)},getResumableFilesData:function(){return u.getResumableFilesData?u.getResumableFilesData():[]},getThirdPartyFileId:function(e){return u.getThirdPartyFileId&&this.isValid(e)?u.getThirdPartyFileId(e):void 0},pause:function(e){return u.pause&&this.isValid(e)&&u.pause(e)?(n(e),!0):void 0}}),i()},qq.UploadHandlerFormApi=function(e,t,n,r,i,s,o){"use strict";function u(r){delete d[r],delete t[r],n&&(clearTimeout(v[r]),delete v[r],h.stopReceivingMessages(r));var i=document.getElementById(e.getIframeName(r));i&&(i.setAttribute("src","java"+String.fromCharCode(115)+"cript:false;"),qq(i).remove())}function a(n,r){var i=n.id,s=l(i),u=t[s].uuid;p[u]=r,d[s]=qq(n).attach("load",function(){t[s].input&&(o("Received iframe load event for CORS upload request (iframe name "+i+")"),v[i]=setTimeout(function(){var e="No valid message received from loaded iframe for iframe name "+i;o(e,"error"),r({error:e})},1e3))}),h.receiveMessage(i,function(t){o("Received the following window message: '"+t+"'");var n,r=l(i),s=e.parseJsonResponse(r,t),u=s.uuid;u&&p[u]?(o("Handling response for iframe name "+i),clearTimeout(v[i]),delete v[i],e.detachLoadEvent(i),n=p[u],delete p[u],h.stopReceivingMessages(i),n(s)):u||o("'"+t+"' does not contain a UUID - ignoring.")})}function f(e){var t=qq.toElement("<iframe src='javascript:false;' name='"+e+"' />");return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t}function l(e){return e.split("_")[0]}var c=qq.getUniqueId(),h=new qq.WindowReceiveMessage({log:o}),p={},d={},v={},m=this;qq.extend(e,{getIframeName:function(e){return e+"_"+c},createIframe:function(t){var n=e.getIframeName(t);return f(n)},parseJsonResponse:function(e,t){var n;try{n=qq.parseJson(t),void 0!==n.newUuid&&m.setUuid(e,n.newUuid)}catch(r){o("Error when attempting to parse iframe upload response ("+r.message+")","error"),n={}}return n},initFormForUpload:function(e){var t=e.method,n=e.endpoint,r=e.params,i=e.paramsInBody,s=e.targetName,o=qq.toElement("<form method='"+t+"' enctype='multipart/form-data'></form>"),u=n;return i?qq.obj2Inputs(r,o):u=qq.obj2url(r,n),o.setAttribute("action",u),o.setAttribute("target",s),o.style.display="none",document.body.appendChild(o),o},attachLoadEvent:function(e,t){var r;n?a(e,t):d[e.id]=qq(e).attach("load",function(){if(o("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML)return}catch(n){o("Error when attempting to access iframe during handling of upload response ("+n.message+")","error"),r={success:!1}}t(r)}})},detachLoadEvent:function(e){void 0!==d[e]&&(d[e](),delete d[e])}}),qq.extend(this,{add:function(e){var n=t.push({input:e})-1;return e.setAttribute("name",r),t[n].uuid=qq.getUniqueId(),e.parentNode&&qq(e).remove(),n},getName:function(e){return void 0!==t[e].newName?t[e].newName:this.isValid(e)?t[e].input.value.replace(/.*(\/|\\)/,""):(o(e+" is not a valid item ID.","error"),void 0)},getInput:function(e){return t[e].input},setName:function(e,n){t[e].newName=n},isValid:function(e){return void 0!==t[e]&&void 0!==t[e].input},reset:function(){t.length=0},expunge:function(e){return u(e)},getUuid:function(e){return t[e].uuid},cancel:function(e){var t=i(e,this.getName(e));return t instanceof qq.Promise?t.then(function(){this.expunge(e)}):t!==!1?(this.expunge(e),!0):!1},upload:function(){},setUuid:function(e,n){o("Server requested UUID change from '"+t[e].uuid+"' to '"+n+"'"),t[e].uuid=n,s(e,n)}})},qq.UploadHandlerXhrApi=function(e,t,n,r,i,s,o){"use strict";function u(e,t,n){return e.slice?e.slice(t,n):e.mozSlice?e.mozSlice(t,n):e.webkitSlice?e.webkitSlice(t,n):void 0}var a=this;qq.extend(e,{createXhr:function(e){var n=qq.createXhrInstance();return t[e].xhr=n,n},getTotalChunks:function(e){if(n){var t=a.getSize(e),r=n.partSize;return Math.ceil(t/r)}},getChunkData:function(t,r){var i=n.partSize,s=a.getSize(t),o=a.getFile(t),f=i*r,l=f+i>=s?s:f+i,p=e.getTotalChunks(t);return{part:r,start:f,end:l,count:p,blob:u(o,f,l),size:l-f}},getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}}}),qq.extend(this,{add:function(e){var n,r=qq.getUniqueId();if(qq.isFile(e))n=t.push({file:e})-1;else{if(!qq.isBlob(e.blob))throw new Error("Passed obj in not a File or BlobData (in qq.UploadHandlerXhr)");n=t.push({blobData:e})-1}return t[n].uuid=r,n},getName:function(e){if(this.isValid(e)){var n=t[e].file,r=t[e].blobData,i=t[e].newName;return void 0!==i?i:n?null!==n.fileName&&void 0!==n.fileName?n.fileName:n.name:r.name}o(e+" is not a valid item ID.","error")},setName:function(e,n){t[e].newName=n},getSize:function(e){var n=t[e].file||t[e].blobData.blob;return qq.isFileOrInput(n)?null!=n.fileSize?n.fileSize:n.size:n.size},getFile:function(e){return t[e]?t[e].file||t[e].blobData.blob:void 0},isValid:function(e){return void 0!==t[e]},reset:function(){t.length=0},expunge:function(e){var n=t[e].xhr;n&&(n.onreadystatechange=null,n.abort()),delete t[e]},getUuid:function(e){return t[e].uuid},upload:function(e,n){return t[e]&&delete t[e].paused,r(e,n)},cancel:function(e){var t=i(e,this.getName(e));return t instanceof qq.Promise?t.then(function(){this.expunge(e)}):t!==!1?(this.expunge(e),!0):!1},setUuid:function(e,n){o("Server requested UUID change from '"+t[e].uuid+"' to '"+n+"'"),t[e].uuid=n,s(e,n)},pause:function(e){var n=t[e].xhr;return n?(o(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",e,this.getName(e))),t[e].paused=!0,n.abort(),!0):void 0}})},qq.WindowReceiveMessage=function(e){"use strict";var t={log:function(){}},n={};qq.extend(t,e),qq.extend(this,{receiveMessage:function(e,t){var r=function(e){t(e.data)};window.postMessage?n[e]=qq(window).attach("message",r):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(e){if(window.postMessage){var t=n[e];t&&t()}}})},function(){"use strict";qq.uiPublicApi={clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments),this._templating.clearFiles()},addExtraDropzone:function(e){this._dnd&&this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){return this._dnd?this._dnd.removeDropzone(e):void 0},getItemByFileId:function(e){return this._templating.getFileContainer(e)},reset:function(){this._parent.prototype.reset.apply(this,arguments),this._templating.reset(),!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()),this._dnd&&(this._dnd.dispose(),this._dnd=this._setupDragAndDrop()),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0,this._setupClickAndEditEventHandlers()},pauseUpload:function(e){var t=this._parent.prototype.pauseUpload.apply(this,arguments);return t&&this._templating.uploadPaused(e),t},continueUpload:function(e){var t=this._parent.prototype.continueUpload.apply(this,arguments);return t&&this._templating.uploadContinued(e),t}},qq.uiPrivateApi={_getButton:function(e){var t=this._parent.prototype._getButton.apply(this,arguments);return t||e===this._defaultButtonId&&(t=this._templating.getButton()),t},_removeFileItem:function(e){this._templating.removeFile(e)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent(),this._focusinEventSupported=!qq.firefox(),this._isEditFilenameEnabled()&&(this._filenameClickHandler=this._bindFilenameClickEvent(),this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent(),this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent())},_setupDragAndDrop:function(){var e=this,t=this._options.dragAndDrop.extraDropzones,n=this._templating,r=n.getDropZone();return r&&t.push(r),new qq.DragAndDrop({dropZoneElements:t,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){n.showDropProcessing()},processingDroppedFilesComplete:function(t){n.hideDropProcessing(),t&&e.addFiles(t)},dropError:function(t,n){e._itemError(t,n)},dropLog:function(t,n){e.log(t,n)}}})},_bindFileButtonsClickEvent:function(){var e=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(t,n){e.log(t,n)},onDeleteFile:function(t){e.deleteFile(t)},onCancel:function(t){e.cancel(t)},onRetry:function(t){qq(e._templating.getFileContainer(t)).removeClass(e._classes.retryable),e.retry(t)},onPause:function(t){e.pauseUpload(t)},onContinue:function(t){e.continueUpload(t)},onGetName:function(t){return e.getName(t)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler},_filenameEditHandler:function(){var e=this,t=this._templating;return{templating:t,log:function(t,n){e.log(t,n)},onGetUploadStatus:function(t){return e.getUploads({id:t}).status},onGetName:function(t){return e.getName(t)},onSetName:function(n,r){var i=e._options.formatFileName(r);t.updateFilename(n,i),e.setName(n,r)},onEditingStatusChange:function(e,n){var r=qq(t.getEditInput(e)),i=qq(t.getFileContainer(e));n?(r.addClass("qq-editing"),t.hideFilename(e),t.hideEditIcon(e)):(r.removeClass("qq-editing"),t.showFilename(e),t.showEditIcon(e)),i.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(e,t,n){this._parent.prototype._onUploadStatusChange.apply(this,arguments),this._isEditFilenameEnabled()&&this._templating.getFileContainer(e)&&n!==qq.status.SUBMITTED&&(this._templating.markFilenameEditable(e),this._templating.hideEditIcon(e))},_bindFilenameInputFocusInEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(e)},_bindFilenameInputFocusEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(e)},_bindFilenameClickEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(e)},_storeForLater:function(e){this._parent.prototype._storeForLater.apply(this,arguments),this._templating.hideSpinner(e)},_onSubmit:function(e,t){this._parent.prototype._onSubmit.apply(this,arguments),this._addToList(e,t)},_onSubmitted:function(e){this._isEditFilenameEnabled()&&(this._templating.markFilenameEditable(e),this._templating.showEditIcon(e),this._focusinEventSupported||this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(e)))},_onProgress:function(e,t,n,r){this._parent.prototype._onProgress.apply(this,arguments),this._templating.updateProgress(e,n,r),n===r?(this._templating.hideCancel(e),this._templating.hidePause(e),this._templating.setStatusText(e,this._options.text.waitingForResponse),this._displayFileSize(e)):this._displayFileSize(e,n,r)},_onComplete:function(e,t,n){function r(t){s.setStatusText(e),qq(s.getFileContainer(e)).removeClass(o._classes.retrying),s.hideProgress(e),(!o._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&s.hideCancel(e),s.hideSpinner(e),t.success?(o._isDeletePossible()&&s.showDeleteButton(e),qq(s.getFileContainer(e)).addClass(o._classes.success),o._maybeUpdateThumbnail(e)):(qq(s.getFileContainer(e)).addClass(o._classes.fail),o._templating.isRetryPossible()&&!o._preventRetries[e]&&qq(s.getFileContainer(e)).addClass(o._classes.retryable),o._controlFailureTextDisplay(e,t))}var i=this._parent.prototype._onComplete.apply(this,arguments),s=this._templating,o=this;return i instanceof qq.Promise?i.done(function(e){r(e)}):r(n),i},_onUpload:function(e){var t=this._parent.prototype._onUpload.apply(this,arguments);return this._templating.showSpinner(e),t},_onUploadChunk:function(e,t){this._parent.prototype._onUploadChunk.apply(this,arguments),t.partIndex>0&&this._templating.allowPause(e)},_onCancel:function(e){this._parent.prototype._onCancel.apply(this,arguments),this._removeFileItem(e)},_onBeforeAutoRetry:function(e){var t,n,r;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments),this._showCancelLink(e),this._options.retry.showAutoRetryNote&&(t=this._autoRetries[e]+1,n=this._options.retry.maxAutoAttempts,r=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,t),r=r.replace(/\{maxAuto\}/g,n),this._templating.setStatusText(e,r),qq(this._templating.getFileContainer(e)).addClass(this._classes.retrying))},_onBeforeManualRetry:function(e){return this._parent.prototype._onBeforeManualRetry.apply(this,arguments)?(this._templating.resetProgress(e),qq(this._templating.getFileContainer(e)).removeClass(this._classes.fail),this._templating.setStatusText(e),this._templating.showSpinner(e),this._showCancelLink(e),!0):(qq(this._templating.getFileContainer(e)).addClass(this._classes.retryable),!1)},_onSubmitDelete:function(e){var t=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,e,t)},_onSubmitDeleteSuccess:function(){this._options.deleteFile.forceConfirm?this._showDeleteConfirm.apply(this,arguments):this._sendDeleteRequest.apply(this,arguments)},_onDeleteComplete:function(e,t,n){this._parent.prototype._onDeleteComplete.apply(this,arguments),this._templating.hideSpinner(e),n?(this._templating.setStatusText(e,this._options.deleteFile.deletingFailedText),this._templating.showDeleteButton(e)):this._removeFileItem(e)},_sendDeleteRequest:function(e){this._templating.hideDeleteButton(e),this._templating.showSpinner(e),this._templating.setStatusText(e,this._options.deleteFile.deletingStatusText),this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(e){var t,n=this._handler.getName(e),r=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,n),i=(this.getUuid(e),arguments),s=this;t=this._options.showConfirm(r),t instanceof qq.Promise?t.then(function(){s._sendDeleteRequest.apply(s,i)}):t!==!1&&s._sendDeleteRequest.apply(s,i)},_addToList:function(e,t){var n,r=0;this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading&&this._templating.disableCancel(),this._options.display.prependFiles&&(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0&&(r=this._filesInBatchAddedToUi-1),n={index:r}),this._options.multiple||(this._handler.cancelAll(),this._clearList()),this._templating.addFile(e,this._options.formatFileName(t),n),this._templating.generatePreview(e,this.getFile(e)),this._filesInBatchAddedToUi+=1,this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading&&this._displayFileSize(e)},_clearList:function(){this._templating.clearFiles(),this.clearStoredFiles()},_displayFileSize:function(e,t,n){var r=this.getSize(e),i=this._formatSize(r);void 0!==t&&void 0!==n&&(i=this._formatProgress(t,n)),this._templating.updateSize(e,i)},_formatProgress:function(e,t){function n(e,t){r=r.replace(e,t)}var r=this._options.text.formatProgress;return n("{percent}",Math.round(e/t*100)),n("{total_size}",this._formatSize(t)),r},_controlFailureTextDisplay:function(e,t){var n,r,i,s,o;n=this._options.failedUploadTextDisplay.mode,r=this._options.failedUploadTextDisplay.maxChars,i=this._options.failedUploadTextDisplay.responseProperty,"custom"===n?(s=t[i],s?s.length>r&&(o=s.substring(0,r)+"..."):(s=this._options.text.failUpload,this.log("'"+i+"' is not a valid property on the server response.","warn")),this._templating.setStatusText(e,o||s),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(e,s)):"default"===n?this._templating.setStatusText(e,this._options.text.failUpload):"none"!==n&&this.log("failedUploadTextDisplay.mode value of '"+n+"' is not valid","warn")},_showTooltip:function(e,t){this._templating.getFileContainer(e).title=t},_showCancelLink:function(e){(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading)&&this._templating.showCancel(e)},_itemError:function(){var e=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(e)},_batchError:function(e){this._parent.prototype._batchError.apply(this,arguments),this._options.showMessage(e)},_setupPastePrompt:function(){var e=this;this._options.callbacks.onPasteReceived=function(){var t=e._options.paste.namePromptMessage,n=e._options.paste.defaultName;return e._options.showPrompt(t,n)}},_fileOrBlobRejected:function(){this._totalFilesInBatch-=1,this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(e){this._totalFilesInBatch=e.length,this._filesInBatchAddedToUi=0,this._parent.prototype._prepareItemsForUpload.apply(this,arguments)},_maybeUpdateThumbnail:function(e){var t=this._thumbnailUrls[e];this._templating.updateThumbnail(e,t)}}}(),qq.FineUploader=function(e,t){"use strict";this._parent=t?qq[t].FineUploaderBasic:qq.FineUploaderBasic,this._parent.apply(this,arguments),qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[]},text:{formatProgress:"{percent}% de {total_size}",failUpload:"L'envoie a echou",waitingForResponse:"Envoie ...",paused:"En pause"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:!0},messages:{tooManyFilesError:"Merci de ne deposer qu'un fichier.",unsupportedBrowser:"Votre navigateur ne peut pas uploader."},retry:{showAutoRetryNote:!0,autoRetryNote:"Nouvel essai {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:!1,confirmMessage:"Etes vous sur de vouloir supprimer le fichier {filename}?",deletingStatusText:"Suppression...",deletingFailedText:"Echec de la suppression"},display:{fileSizeOnSubmit:!1,prependFiles:!1},paste:{promptForName:!1,namePromptMessage:"Veuillez donner un nom a cette image"},thumbnails:{placeholders:{waitUntilResponse:!1,notAvailablePath:null,waitingPath:null}},showMessage:function(e){setTimeout(function(){window.alert(e)},0)},showConfirm:function(e){return window.confirm(e)},showPrompt:function(e,t){return window.prompt(e,t)}},!0),qq.extend(this._options,e,!0),this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text}),!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors?this._templating.renderFailure(this._options.messages.unsupportedBrowser):(this._wrapCallbacks(),this._templating.render(),this._classes=this._options.classes,!this._options.button&&this._templating.getButton()&&(this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()),this._setupClickAndEditEventHandlers(),qq.DragAndDrop&&qq.supportedFeatures.fileDrop&&(this._dnd=this._setupDragAndDrop()),this._options.paste.targetElement&&this._options.paste.promptForName&&(qq.PasteSupport?this._setupPastePrompt():qq.log("Paste support module not found.","info")),this._totalFilesInBatch=0,this._filesInBatchAddedToUi=0)},qq.extend(qq.FineUploader.prototype,qq.basePublicApi),qq.extend(qq.FineUploader.prototype,qq.basePrivateApi),qq.extend(qq.FineUploader.prototype,qq.uiPublicApi),qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi),qq.Templating=function(e){"use strict";function t(){var e,t,n,r,i,s,o,u,a;if(T("Parsing template"),null==R.templateIdOrEl)throw new Error("You MUST specify either a template element or ID!");if(qq.isString(R.templateIdOrEl)){if(e=document.getElementById(R.templateIdOrEl),null===e)throw new Error(qq.format("Cannot find template script at ID '{}'!",R.templateIdOrEl));t=e.innerHTML}else{if(void 0===R.templateIdOrEl.innerHTML)throw new Error("You have specified an invalid value for the template option!  It must be an ID or an Element.");t=R.templateIdOrEl.innerHTML}if(t=qq.trimStr(t),r=document.createElement("div"),r.appendChild(qq.toElement(t)),R.button&&(s=qq(r).getByClass(U.button)[0],s&&qq(s).remove()),qq.DragAndDrop&&qq.supportedFeatures.fileDrop||(a=qq(r).getByClass(U.dropProcessing)[0],a&&qq(a).remove()),o=qq(r).getByClass(U.drop)[0],o&&!qq.DragAndDrop&&(qq.log("DnD module unavailable.","info"),qq(o).remove()),o&&!qq.supportedFeatures.fileDrop&&qq(o).hasAttribute(F)&&qq(o).css({display:"none"}),u=qq(r).getByClass(U.thumbnail)[0],O?u&&(q=parseInt(u.getAttribute(B)),q=q>0?q:null,M=qq(u).hasAttribute(j)):u&&qq(u).remove(),O=O&&u,N=qq(r).getByClass(U.editFilenameInput).length>0,C=qq(r).getByClass(U.retry).length>0,n=qq(r).getByClass(U.list)[0],null==n)throw new Error("Could not find the file list container in the template!");return i=n.innerHTML,n.innerHTML="",T("Template parsing complete"),{template:qq.trimStr(r.innerHTML),fileTemplate:qq.trimStr(i)}}function n(e){return qq(A).getByClass(H+e)[0]}function r(e,t){return qq(e).getByClass(t)[0]}function i(e,t){var n=A,r=n.firstChild;t>0&&(r=qq(n).children()[t].nextSibling),n.insertBefore(e,r)}function s(e){return r(n(e),U.cancel)}function o(e){return r(n(e),U.pause)}function u(e){return r(n(e),U.continueButton)}function a(e){return r(n(e),U.progressBarContainer)||r(n(e),U.progressBar)}function f(e){return r(n(e),U.spinner)}function l(e){return r(n(e),U.editNameIcon)}function c(e){return r(n(e),U.size)}function h(e){return r(n(e),U.deleteButton)}function p(e){return r(n(e),U.retry)}function d(e){return r(n(e),U.file)}function v(){return r(L,U.dropProcessing)}function m(e){return O&&r(n(e),U.thumbnail)}function g(e){e&&qq(e).addClass(R.classes.hide)}function y(e){e&&qq(e).removeClass(R.classes.hide)}function b(e,t){var n=a(e);n&&!qq(n).hasClass(U.progressBar)&&(n=qq(n).getByClass(U.progressBar)[0]),n&&qq(n).css({width:t+"%"})}function w(){var e=R.placeholders.thumbnailNotAvailable,t=R.placeholders.waitingForThumbnail,n={maxSize:q,scale:M};O&&(e&&R.imageGenerator.generate(e,new Image,n).then(function(e){_=e},function(){T("Problem loading 'not available' placeholder image at "+e,"error")}),t&&R.imageGenerator.generate(t,new Image,n).then(function(e){D=e},function(){T("Problem loading 'waiting for thumbnail' placeholder image at "+t,"error")}))}function E(e){D?(x(D,e),e.src=D.src,y(e)):g(e)}function S(e,t){var n=z[e]||(new qq.Promise).failure();_&&n.then(function(){delete z[e]},function(){x(_,t),t.src=_.src,y(t),delete z[e]})}function x(e,t){var n=e.style.maxWidth,r=e.style.maxHeight;r&&n&&!t.style.maxWidth&&!t.style.maxHeight&&qq(t).css({maxWidth:n,maxHeight:r})}var T,N,C,k,L,A,O,M,_,D,P="qq-file-id",H="qq-file-id-",B="qq-max-size",j="qq-server-scale",F="qq-hide-dropzone",I=!1,q=-1,R={log:null,templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:!1,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},U={button:"qq-upload-button-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},z={};qq.extend(R,e),T=R.log,L=R.containerEl,O=void 0!==R.imageGenerator,k=t(),w(),qq.extend(this,{render:function(){T("Rendering template in DOM."),L.innerHTML=k.template,g(v()),A=R.fileContainerEl||r(L,U.list),T("Template rendering complete")},renderFailure:function(e){var t=qq.toElement(e);L.innerHTML="",L.appendChild(t)},reset:function(){this.render()},clearFiles:function(){A.innerHTML=""},disableCancel:function(){I=!0},addFile:function(e,t,n){var s=qq.toElement(k.fileTemplate),f=r(s,U.file);qq(s).addClass(H+e),f&&qq(f).setText(t),s.setAttribute(P,e),n?i(s,n.index):A.appendChild(s),g(a(e)),g(c(e)),g(h(e)),g(p(e)),g(o(e)),g(u(e)),I&&this.hideCancel(e)},removeFile:function(e){qq(n(e)).remove()},getFileId:function(e){for(var t=e;null==t.getAttribute(P);)t=t.parentNode;return parseInt(t.getAttribute(P))},getFileList:function(){return A},markFilenameEditable:function(e){var t=d(e);t&&qq(t).addClass(R.classes.editable)},updateFilename:function(e,t){var n=d(e);n&&qq(n).setText(t)},hideFilename:function(e){g(d(e))},showFilename:function(e){y(d(e))},isFileName:function(e){return qq(e).hasClass(U.file)},getButton:function(){return R.button||r(L,U.button)},hideDropProcessing:function(){g(v())},showDropProcessing:function(){y(v())},getDropZone:function(){return r(L,U.drop)},isEditFilenamePossible:function(){return N},isRetryPossible:function(){return C},getFileContainer:function(e){return n(e)},showEditIcon:function(e){var t=l(e);t&&qq(t).addClass(R.classes.editable)},hideEditIcon:function(e){var t=l(e);t&&qq(t).removeClass(R.classes.editable)},isEditIcon:function(e){return qq(e).hasClass(U.editNameIcon)},getEditInput:function(e){return r(n(e),U.editFilenameInput)},isEditInput:function(e){return qq(e).hasClass(U.editFilenameInput)},updateProgress:function(e,t,n){var r,i=a(e);i&&(r=Math.round(t/n*100),t===n?g(i):y(i),b(e,r))},hideProgress:function(e){var t=a(e);t&&g(t)},resetProgress:function(e){b(e,0)},showCancel:function(e){if(!I){var t=s(e);t&&qq(t).removeClass(R.classes.hide)}},hideCancel:function(e){g(s(e))},isCancel:function(e){return qq(e).hasClass(U.cancel)},allowPause:function(e){y(o(e)),g(u(e))},uploadPaused:function(e){this.setStatusText(e,R.text.paused),this.allowContinueButton(e),g(f(e))},hidePause:function(e){g(o(e))},isPause:function(e){return qq(e).hasClass(U.pause)},isContinueButton:function(e){return qq(e).hasClass(U.continueButton)},allowContinueButton:function(e){y(u(e)),g(o(e))},uploadContinued:function(e){this.setStatusText(e,""),this.allowPause(e),y(f(e))},showDeleteButton:function(e){y(h(e))},hideDeleteButton:function(e){g(h(e))},isDeleteButton:function(e){return qq(e).hasClass(U.deleteButton)},isRetry:function(e){return qq(e).hasClass(U.retry)},updateSize:function(e,t){var n=c(e);n&&(y(n),qq(n).setText(t))},setStatusText:function(e,t){var i=r(n(e),U.statusText);i&&(null==t?qq(i).clearText():qq(i).setText(t))},hideSpinner:function(e){g(f(e))},showSpinner:function(e){y(f(e))},generatePreview:function(e,t){var n=m(e),r={maxSize:q,scale:!0,orient:!0};if(qq.supportedFeatures.imagePreviews){if(z[e]=new qq.Promise,n)return E(n),R.imageGenerator.generate(t,n,r).then(function(){y(n),z[e].success()},function(){z[e].failure(),R.placeholders.waitUntilUpdate||S(e,n)})}else n&&E(n)},updateThumbnail:function(e,t){var n=m(e),r={maxSize:q,scale:M};if(n){if(t)return R.imageGenerator.generate(t,n,r).then(function(){y(n)},function(){S(e,n)});S(e,n)}}})},qq.UploadHandlerForm=function(e,t,n,r){"use strict";function i(e,t){var n;try{var r=t.contentDocument||t.contentWindow.document,i=r.body.innerHTML;a("converting iframe's innerHTML to JSON"),a("innerHTML = "+i),i&&i.match(/^<pre/i)&&(i=r.body.firstChild.firstChild.nodeValue),n=f.parseJsonResponse(e,i)}catch(s){a("Error when attempting to parse form upload response ("+s.message+")","error"),n={success:!1}}return n}function s(t,n){var r=e.paramsStore.getParams(t),i=e.demoMode?"GET":"POST",s=e.endpointStore.getEndpoint(t),u=o[t].newName||l.getName(t);return r[e.uuidParam]=o[t].uuid,r[e.filenameParam]=u,f.initFormForUpload({method:i,endpoint:s,params:r,paramsInBody:e.paramsInBody,targetName:n.name})}var o=[],u=t,a=r,f={},l=this;qq.extend(this,new qq.UploadHandlerFormApi(f,o,e.cors.expected,e.inputName,e.onCancel,n,a)),qq.extend(this,{upload:function(t){var n,r=o[t].input,l=this.getName(t),c=f.createIframe(t);if(!r)throw new Error("file with passed id was not added, or already uploaded or canceled");e.onUpload(t,this.getName(t)),n=s(t,c),n.appendChild(r),f.attachLoadEvent(c,function(n){a("iframe loaded");var r=n?n:i(t,c);f.detachLoadEvent(t),e.cors.expected||qq(c).remove(),(r.success||!e.onAutoRetry(t,l,r))&&(e.onComplete(t,l,r),u(t))}),a("Sending upload request for "+t),n.submit(),qq(n).remove()}})},qq.UploadHandlerXhr=function(e,t,n,r){"use strict";function i(){return null===e.resume.id||void 0===e.resume.id||qq.isFunction(e.resume.id)||qq.isObject(e.resume.id)?void 0:e.resume.id}function s(t,n,r){var i=q.getSize(t),s=q.getName(t);n[e.chunking.paramNames.partIndex]=r.part,n[e.chunking.paramNames.partByteOffset]=r.start,n[e.chunking.paramNames.chunkSize]=r.size,n[e.chunking.paramNames.totalParts]=r.count,n[e.totalFileSizeParam]=i,F&&(n[e.filenameParam]=s)}function o(t){t[e.resume.paramNames.resuming]=!0}function u(t,n,r,i){var s=new FormData,o=e.demoMode?"GET":"POST",u=e.endpointStore.getEndpoint(i),a=u,f=P[i].newName||q.getName(i),l=q.getSize(i);return t[e.uuidParam]=P[i].uuid,t[e.filenameParam]=f,F&&(t[e.totalFileSizeParam]=l),e.paramsInBody||(F||(t[e.inputName]=f),a=qq.obj2url(t,u)),n.open(o,a,!0),e.cors.expected&&e.cors.sendCredentials&&(n.withCredentials=!0),F?(e.paramsInBody&&qq.obj2FormData(t,s),s.append(e.inputName,r),s):r}function a(t,n){var r=e.customHeaders,i=P[t].file||P[t].blobData.blob;n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Cache-Control","no-cache"),F||(n.setRequestHeader("Content-Type","application/octet-stream"),n.setRequestHeader("X-Mime-Type",i.type)),qq.each(r,function(e,t){n.setRequestHeader(e,t)})}function f(t,n,r){var i=q.getName(t),s=q.getSize(t);P[t].attemptingResume=!1,e.onProgress(t,i,s,s),e.onComplete(t,i,n,r),P[t]&&delete P[t].xhr,_(t)}function l(t){var n,r,i=P[t].remainingChunkIdxs[0],f=I.getChunkData(t,i),l=I.createXhr(t),h=q.getSize(t),p=q.getName(t);void 0===P[t].loaded&&(P[t].loaded=0),j&&P[t].file&&E(t,f),l.onreadystatechange=w(t,l),l.upload.onprogress=function(n){if(n.lengthComputable){var r=n.loaded+P[t].loaded,s=c(t,i,n.total);e.onProgress(t,p,r,s)}},e.onUploadChunk(t,p,I.getChunkDataForCallback(f)),r=e.paramsStore.getParams(t),s(t,r,f),P[t].attemptingResume&&o(r),n=u(r,l,f.blob,t),a(t,l),D("Sending chunked upload request for item "+t+": bytes "+(f.start+1)+"-"+f.end+" of "+h),l.send(n)}function c(e,t,n){var r=I.getChunkData(e,t),i=r.size,s=n-i,o=q.getSize(e),u=r.count,a=P[e].initialRequestOverhead,f=s-a;return P[e].lastRequestOverhead=s,0===t?(P[e].lastChunkIdxProgress=0,P[e].initialRequestOverhead=s,P[e].estTotalRequestsSize=o+u*s):P[e].lastChunkIdxProgress!==t&&(P[e].lastChunkIdxProgress=t,P[e].estTotalRequestsSize+=f),P[e].estTotalRequestsSize}function h(e){return F?P[e].lastRequestOverhead:0}function p(t,n,r){var i=P[t].remainingChunkIdxs.shift(),s=I.getChunkData(t,i);P[t].attemptingResume=!1,P[t].loaded+=s.size+h(t),e.onUploadChunkSuccess(t,s,n,r),P[t].remainingChunkIdxs.length>0?l(t):(j&&S(t),f(t,n,r))}function d(e,t){return 200!==e.status||!t.success||t.reset}function v(e,t){var n;try{D(qq.format("Received response status {} with body: {}",t.status,t.responseText)),n=qq.parseJson(t.responseText),void 0!==n.newUuid&&q.setUuid(e,n.newUuid)}catch(r){D("Error when attempting to parse xhr response text ("+r.message+")","error"),n={}}return n}function m(e){D("Server has ordered chunking effort to be restarted on next attempt for item ID "+e,"error"),j&&(S(e),P[e].attemptingResume=!1),P[e].remainingChunkIdxs=[],delete P[e].loaded,delete P[e].estTotalRequestsSize,delete P[e].initialRequestOverhead}function g(e){P[e].attemptingResume=!1,D("Server has declared that it cannot handle resume for item ID "+e+" - starting from the first chunk","error"),m(e),q.upload(e,!0)}function y(t,n,r){var i=q.getName(t);e.onAutoRetry(t,i,n,r)||f(t,n,r)}function b(e,t){var n,r=P[e],i=r&&r.attemptingResume,s=r&&r.paused;r&&!s&&(D("xhr - server response received for "+e),D("responseText = "+t.responseText),n=v(e,t),d(t,n)?(n.reset&&m(e),i&&n.reset?g(e):y(e,n,t)):B?p(e,n,t):f(e,n,t))}function w(e,t){return function(){4===t.readyState&&b(e,t)}}function E(t,n){var r=q.getUuid(t),i=P[t].loaded,s=P[t].initialRequestOverhead,o=P[t].estTotalRequestsSize,u=T(t),a=r+H+n.part+H+i+H+s+H+o,f=e.resume.cookiesExpireIn;qq.setCookie(u,a,f)}function S(e){if(P[e].file){var t=T(e);qq.deleteCookie(t)}}function x(e){var t,n,r,i,s,o,u=qq.getCookie(T(e)),a=q.getName(e);if(u){if(t=u.split(H),5===t.length)return n=t[0],r=parseInt(t[1],10),i=parseInt(t[2],10),s=parseInt(t[3],10),o=parseInt(t[4],10),{uuid:n,part:r,lastByteSent:i,initialRequestOverhead:s,estTotalRequestsSize:o};D("Ignoring previously stored resume/chunk cookie for "+a+" - old cookie format","warn")}}function T(t){var n,r=q.getName(t),i=q.getSize(t),s=e.chunking.partSize;return n="qqfilechunk"+H+encodeURIComponent(r)+H+i+H+s,void 0!==M&&(n+=H+M),n}function N(e,t){var n;for(n=I.getTotalChunks(e)-1;n>=t;n-=1)P[e].remainingChunkIdxs.unshift(n);l(e)}function C(e,t,n,r){n=r.part,P[e].loaded=r.lastByteSent,P[e].estTotalRequestsSize=r.estTotalRequestsSize,P[e].initialRequestOverhead=r.initialRequestOverhead,P[e].attemptingResume=!0,D("Resuming "+t+" at partition index "+n),N(e,n)}function k(t,n,r){var i,s=q.getName(t),o=I.getChunkData(t,n.part);i=e.onResume(t,s,I.getChunkDataForCallback(o)),i instanceof qq.Promise?(D("Waiting for onResume promise to be fulfilled for "+t),i.then(function(){C(t,s,r,n)},function(){D("onResume promise fulfilled - failure indicated.  Will not resume."),N(t,r)})):i!==!1?C(t,s,r,n):(D("onResume callback returned false.  Will not resume."),N(t,r))}function L(e,t){var n,r=0;P[e].remainingChunkIdxs&&0!==P[e].remainingChunkIdxs.length?l(e):(P[e].remainingChunkIdxs=[],j&&!t&&P[e].file?(n=x(e),n?k(e,n,r):N(e,r)):N(e,r))}function A(t){var n,r,i,s=P[t].file||P[t].blobData.blob,o=q.getName(t);P[t].loaded=0,n=I.createXhr(t),n.upload.onprogress=function(n){n.lengthComputable&&(P[t].loaded=n.loaded,e.onProgress(t,o,n.loaded,n.total))},n.onreadystatechange=w(t,n),r=e.paramsStore.getParams(t),i=u(r,n,s,t),a(t,n),D("Sending upload request for "+t),n.send(i)}function O(t,n){var r=q.getName(t);q.isValid(t)&&(e.onUpload(t,r),B?L(t,n):A(t))}var M,_=t,D=r,P=[],H="|",B=e.chunking.enabled&&qq.supportedFeatures.chunking,j=e.resume.enabled&&B&&qq.supportedFeatures.resume,F=e.forceMultipart||e.paramsInBody,I={},q=this;M=i(),qq.extend(this,new qq.UploadHandlerXhrApi(I,P,B?e.chunking:null,O,e.onCancel,n,D)),qq.override(this,function(t){return{add:function(e){var n,r=t.add(e);return j&&(n=x(r),n&&(P[r].uuid=n.uuid)),r},getResumableFilesData:function(){var t=[],n=[];return B&&j?(t=void 0===M?qq.getCookieNames(new RegExp("^qqfilechunk\\"+H+".+\\"+H+"\\d+\\"+H+e.chunking.partSize+"=")):qq.getCookieNames(new RegExp("^qqfilechunk\\"+H+".+\\"+H+"\\d+\\"+H+e.chunking.partSize+"\\"+H+M+"=")),qq.each(t,function(e,t){var r=t.split(H),i=qq.getCookie(t).split(H);n.push({name:decodeURIComponent(r[1]),size:r[2],uuid:i[0],partIdx:i[1]})}),n):[]},expunge:function(e){j&&S(e),t.expunge(e)}}})},qq.PasteSupport=function(e){"use strict";function t(e){return e.type&&0===e.type.indexOf("image/")}function n(){qq(i.targetElement).attach("paste",function(e){var n=e.clipboardData;n&&qq.each(n.items,function(e,n){if(t(n)){var r=n.getAsFile();i.callbacks.pasteReceived(r)}})})}function r(){s&&s()}var i,s;i={targetElement:null,callbacks:{log:function(){},pasteReceived:function(){}}},qq.extend(i,e),n(),qq.extend(this,{reset:function(){r()}})},qq.DragAndDrop=function(e){"use strict";function t(e,t){a.callbacks.dropLog("Grabbed "+e.length+" dropped files."),t.dropDisabled(!1),a.callbacks.processingDroppedFilesComplete(e)}function n(e){var t,r=new qq.Promise;return e.isFile?e.file(function(e){c.push(e),r.success()},function(t){a.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+t.code+".","error"),r.failure()}):e.isDirectory&&(t=e.createReader(),t.readEntries(function(e){var t=e.length;qq.each(e,function(e,i){n(i).done(function(){t-=1,0===t&&r.success()})}),e.length||r.success()},function(t){a.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+t.code+".","error"),r.failure()})),r}function r(e,t){var r=[],i=new qq.Promise;return a.callbacks.processingDroppedFiles(),t.dropDisabled(!0),e.files.length>1&&!a.allowMultipleItems?(a.callbacks.processingDroppedFilesComplete([]),a.callbacks.dropError("tooManyFilesError",""),t.dropDisabled(!1),i.failure()):(c=[],qq.isFolderDropSupported(e)?qq.each(e.items,function(e,t){var s=t.webkitGetAsEntry();s&&(s.isFile?c.push(t.getAsFile()):r.push(n(s).done(function(){r.pop(),0===r.length&&i.success()})))}):c=e.files,0===r.length&&i.success()),i}function i(e){var n=new qq.UploadDropZone({element:e,onEnter:function(t){qq(e).addClass(a.classes.dropActive),t.stopPropagation()},onLeaveNotDescendants:function(){qq(e).removeClass(a.classes.dropActive)},onDrop:function(i){qq(e).hasAttribute(f)&&qq(e).hide(),qq(e).removeClass(a.classes.dropActive),r(i.dataTransfer,n).done(function(){t(c,n)})}});return h.addDisposer(function(){n.dispose()}),qq(e).hasAttribute(f)&&qq(e).hide(),l.push(n),n}function s(e){var t;return qq.each(e.dataTransfer.types,function(e,n){return"Files"===n?(t=!0,!1):void 0}),t}function o(e){return(qq.chrome()||qq.safari()&&qq.windows())&&0==e.clientX&&0==e.clientY||qq.firefox()&&!e.relatedTarget}function u(){var e=a.dropZoneElements;qq.each(e,function(t,n){var r=i(n);!e.length||qq.ie()&&!qq.ie10()||h.attach(document,"dragenter",function(t){!r.dropDisabled()&&s(t)&&qq.each(e,function(e,t){t instanceof HTMLElement&&qq(t).css({display:"block"})})})}),h.attach(document,"dragleave",function(t){o(t)&&qq.each(e,function(e,t){qq(t).hasAttribute(f)&&qq(t).hide()})}),h.attach(document,"drop",function(t){qq.each(e,function(e,t){qq(t).hasAttribute(f)&&qq(t).hide()}),t.preventDefault()})}var a,f="qq-hide-dropzone",l=[],c=[],h=new qq.DisposeSupport;a={dropZoneElements:[],allowMultipleItems:!0,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks},qq.extend(a,e,!0),u(),qq.extend(this,{setupExtraDropzone:function(e){a.dropZoneElements.push(e),i(e)},removeDropzone:function(e){var t,n=a.dropZoneElements;for(t in n)if(n[t]===e)return n.splice(t,1)},dispose:function(){h.dispose(),qq.each(l,function(e,t){t.dispose()})}})},qq.DragAndDrop.callbacks=function(){"use strict";return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(){},dropError:function(e,t){qq.log("Drag & drop error code '"+e+" with these specifics: '"+t+"'","error")},dropLog:function(e,t){qq.log(e,t)}}},qq.UploadDropZone=function(e){"use strict";function t(){return qq.safari()||qq.firefox()&&qq.windows()}function n(){f||(t?l.attach(document,"dragover",function(e){e.preventDefault()}):l.attach(document,"dragover",function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="none",e.preventDefault())}),f=!0)}function r(e){if(qq.ie()&&!qq.ie10())return!1;var t,n=e.dataTransfer,r=qq.safari();return t=qq.ie10()||qq.ie11()?!0:"none"!==n.effectAllowed,n&&t&&(n.files||!r&&n.types.contains&&n.types.contains("Files"))}function i(e){return void 0!==e&&(a=e),a}function s(){l.attach(u,"dragover",function(e){if(r(e)){var t=qq.ie()||qq.ie11()?null:e.dataTransfer.effectAllowed;e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",e.stopPropagation(),e.preventDefault()}}),l.attach(u,"dragenter",function(e){if(!i()){if(!r(e))return;o.onEnter(e)}}),l.attach(u,"dragleave",function(e){if(r(e)){o.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);qq(this).contains(t)||o.onLeaveNotDescendants(e)}}),l.attach(u,"drop",function(e){if(!i()){if(!r(e))return;e.preventDefault(),o.onDrop(e)}})}var o,u,a,f,l=new qq.DisposeSupport;o={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}},qq.extend(o,e),u=o.element,n(),s(),qq.extend(this,{dropDisabled:function(e){return i(e)},dispose:function(){l.dispose()}})},qq.DeleteFileAjaxRequester=function(e){"use strict";function t(){return"POST"===r.method.toUpperCase()?{_method:"DELETE"}:{}}var n,r={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:{},paramsStore:{},demoMode:!1,cors:{expected:!1,sendCredentials:!1},log:function(){},onDelete:function(){},onDeleteComplete:function(){}};qq.extend(r,e),n=new qq.AjaxRequester({validMethods:["POST","DELETE"],method:r.method,endpointStore:r.endpointStore,paramsStore:r.paramsStore,mandatedParams:t(),maxConnections:r.maxConnections,customHeaders:r.customHeaders,demoMode:r.demoMode,log:r.log,onSend:r.onDelete,onComplete:r.onDeleteComplete,cors:r.cors}),qq.extend(this,{sendDelete:function(e,t,i){var s=i||{};r.log("Submitting delete file request for "+e),"DELETE"===r.method?n.initTransport(e).withPath(t).withParams(s).send():(s[r.uuidParamName]=t,n.initTransport(e).withParams(s).send())}})},function(){function e(e){var t=e.naturalWidth,n=e.naturalHeight;if(t*n>1048576){var r=document.createElement("canvas");r.width=r.height=1;var i=r.getContext("2d");return i.drawImage(e,-t+1,0),0===i.getImageData(0,0,1,1).data[3]}return!1}function t(e,t,n){var r=document.createElement("canvas");r.width=1,r.height=n;var i=r.getContext("2d");i.drawImage(e,0,0);for(var s=i.getImageData(0,0,1,n).data,o=0,u=n,a=n;a>o;){var f=s[4*(a-1)+3];0===f?u=a:o=a,a=u+o>>1}var l=a/n;return 0===l?1:l}function n(e,t,n){var i=document.createElement("canvas"),s=t.mime||"image/jpeg";return r(e,i,t,n),i.toDataURL(s,t.quality||.8)}function r(n,r,s,o){var u=n.naturalWidth,f=n.naturalHeight,l=s.width,c=s.height,h=r.getContext("2d");if(h.save(),i(r,l,c,s.orientation),qq.ios()){var p=e(n);p&&(u/=2,f/=2);var d=1024,v=document.createElement("canvas");v.width=v.height=d;for(var m=v.getContext("2d"),g=o?t(n,u,f):1,y=Math.ceil(d*l/u),w=Math.ceil(d*c/f/g),E=0,S=0;f>E;){for(var x=0,T=0;u>x;)m.clearRect(0,0,d,d),m.drawImage(n,-x,-E),h.drawImage(v,0,0,d,d,T,S,y,w),x+=d,T+=y;E+=d,S+=w}h.restore(),v=m=null}else h.drawImage(n,0,0,l,c)}function i(e,t,n,r){switch(r){case 5:case 6:case 7:case 8:e.width=n,e.height=t;break;default:e.width=t,e.height=n}var i=e.getContext("2d");switch(r){case 2:i.translate(t,0),i.scale(-1,1);break;case 3:i.translate(t,n),i.rotate(Math.PI);break;case 4:i.translate(0,n),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-n);break;case 7:i.rotate(.5*Math.PI),i.translate(t,-n),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-t,0)}}function s(e,t){if(window.Blob&&e instanceof Blob){var n=new Image,r=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!r)throw Error("No createObjectURL function found to create blob url");n.src=r.createObjectURL(e),this.blob=e,e=n}if(!e.naturalWidth&&!e.naturalHeight){var i=this;e.onload=function(){var e=i.imageLoadListeners;if(e){i.imageLoadListeners=null;for(var t=0,n=e.length;n>t;t++)e[t]()}},e.onerror=t,this.imageLoadListeners=[]}this.srcImage=e}s.prototype.render=function(e,t){if(this.imageLoadListeners){var i=this;return this.imageLoadListeners.push(function(){i.render(e,t)}),void 0}t=t||{};var s=this.srcImage.naturalWidth,o=this.srcImage.naturalHeight,u=t.width,a=t.height,f=t.maxWidth,l=t.maxHeight,h=!this.blob||"image/jpeg"===this.blob.type;u&&!a?a=o*u/s<<0:a&&!u?u=s*a/o<<0:(u=s,a=o),f&&u>f&&(u=f,a=o*u/s<<0),l&&a>l&&(a=l,u=s*a/o<<0);var p={width:u,height:a};for(var v in t)p[v]=t[v];var m=e.tagName.toLowerCase();"img"===m?e.src=n(this.srcImage,p,h):"canvas"===m&&r(this.srcImage,e,p,h),"function"==typeof this.onrender&&this.onrender(e)},"function"==typeof define&&define.amd?define([],function(){return s}):this.MegaPixImage=s}(),qq.ImageGenerator=function(e){"use strict";function t(e){return"img"===e.tagName.toLowerCase()}function n(e){return"canvas"===e.tagName.toLowerCase()}function r(){return void 0!==(new Image).crossOrigin}function i(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")}function s(e){var t=e.split("/"),n=t[t.length-1],r=qq.getExtension(n);switch(r=r&&r.toLowerCase()){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function o(e){var t,n,r,i=document.createElement("a");return i.href=e,t=i.protocol,r=i.port,n=i.hostname,t.toLowerCase()!==window.location.protocol.toLowerCase()?!0:n.toLowerCase()!==window.location.hostname.toLowerCase()?!0:r===window.location.port||qq.ie()?!1:!0}function u(t,n){t.onload=function(){t.onload=null,t.onerror=null,n.success(t)},t.onerror=function(){t.onload=null,t.onerror=null,e("Problem drawing thumbnail!","error"),n.failure(t,"Problem drawing thumbnail!")}}function a(e,t){var n=e.getContext("2d"),r=n.drawImage;n.drawImage=function(){r.apply(this,arguments),t.success(e),n.drawImage=r}}function f(r,i){var s=t(r)||n(r);return t(r)?u(r,i):n(r)?a(r,i):(i.failure(r),e(qq.format("Element container of type {} is not supported!",r.tagName),"error")),s}function l(t,n,r){var i=new qq.Promise,s=new qq.Identify(t,e),o=r.maxSize,u=function(){n.onerror=null,n.onload=null,e("Could not render preview, file may be too large!","error"),i.failure(n,"Browser cannot render image!")};return s.isPreviewable().then(function(r){var s=new qq.Exif(t,e),a=new MegaPixImage(t,u);f(n,i)&&s.parse().then(function(e){var t=e.Orientation;a.render(n,{maxWidth:o,maxHeight:o,orientation:t,mime:r})},function(t){e(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",t)),a.render(n,{maxWidth:o,maxHeight:o,mime:r})})},function(){e("Not previewable"),i.failure(n,"Not previewable")}),i}function c(e,t,n,r){var i=new Image,u=new qq.Promise;f(i,u),o(e)&&(i.crossOrigin="anonymous"),i.src=e,u.then(function(){f(t,n);var o=new MegaPixImage(i);o.render(t,{maxWidth:r,maxHeight:r,mime:s(e)})})}function h(e,t,n,r){f(t,n),qq(t).css({maxWidth:r+"px",maxHeight:r+"px"}),t.src=e}function p(e,s,u){var a=new qq.Promise,l=u.scale,p=l?u.maxSize:null;return l&&t(s)?i()?o(e)&&!r()?h(e,s,a,p):c(e,s,a,p):h(e,s,a,p):n(s)?c(e,s,a,p):f(s,a)&&(s.src=e),a}qq.extend(this,{generate:function(t,n,r){return qq.isString(t)?(e("Attempting to update thumbnail based on server response."),p(t,n,r||{})):(e("Attempting to draw client-side image preview."),l(t,n,r||{}))}}),this._testing={},this._testing.isImg=t,this._testing.isCanvas=n,this._testing.isCrossOrigin=o,this._testing.determineMimeOfFileName=s},qq.Exif=function(e,t){"use strict";function n(e){for(var t=0,n=0;e.length>0;)t+=parseInt(e.substring(0,2),16)*Math.pow(2,n),e=e.substring(2,e.length),n+=8;return t}function r(t,n){var i=t,s=n;return void 0===i&&(i=2,s=new qq.Promise),qq.readBlobToHex(e,i,4).then(function(e){var t=/^ffe([0-9])/.exec(e);if(t)if("1"!==t[1]){var n=parseInt(e.slice(4,8),16);r(i+n+2,s)}else s.success(i);else s.failure("No EXIF header to be found!")}),s}function i(){var t=new qq.Promise;return qq.readBlobToHex(e,0,6).then(function(e){0!==e.indexOf("ffd8")?t.failure("Not a valid JPEG!"):r().then(function(e){t.success(e)},function(e){t.failure(e)})}),t}function s(t){var n=new qq.Promise;return qq.readBlobToHex(e,t+10,2).then(function(e){n.success("4949"===e)}),n}function o(t,r){var i=new qq.Promise;return qq.readBlobToHex(e,t+18,2).then(function(e){return r?i.success(n(e)):(i.success(parseInt(e,16)),void 0)}),i}function u(t,n){var r=t+20,i=12*n;return qq.readBlobToHex(e,r,i)}function a(e){for(var t=[],n=0;n+24<=e.length;)t.push(e.slice(n,n+24)),n+=24;return t}function f(e,t){var r=16,i=qq.extend([],l),s={};return qq.each(t,function(t,o){var u,a,f,l=o.slice(0,4),h=e?n(l):parseInt(l,16),p=i.indexOf(h);return p>=0&&(a=c[h].name,f=c[h].bytes,u=o.slice(r,r+2*f),s[a]=e?n(u):parseInt(u,16),i.splice(p,1)),0===i.length?!1:void 0}),s}var l=[274],c={274:{name:"Orientation",bytes:2}};qq.extend(this,{parse:function(){var n=new qq.Promise,r=function(e){t(qq.format("EXIF header parse failed: '{}' ",e)),n.failure(e)};return i().then(function(i){t(qq.format("Moving forward with EXIF header parsing for '{}'",void 0===e.name?"blob":e.name)),s(i).then(function(e){t(qq.format("EXIF Byte order is {} endian",e?"little":"big")),o(i,e).then(function(s){t(qq.format("Found {} APP1 directory entries",s)),u(i,s).then(function(r){var i=a(r),s=f(e,i);t("Successfully parsed some EXIF tags"),n.success(s)},r)},r)},r)},r),n}}),this._testing={},this._testing.parseLittleEndian=n},qq.Identify=function(e,t){"use strict";function n(e,t){var n=!1,r=[].concat(e);return qq.each(r,function(e,r){return 0===t.indexOf(r)?(n=!0,!1):void 0}),n}var r={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]};qq.extend(this,{isPreviewable:function(){var i=new qq.Promise,s=!1,o=void 0===e.name?"blob":e.name;return t(qq.format("Attempting to determine if {} can be rendered in this browser",o)),qq.readBlobToHex(e,0,4).then(function(e){qq.each(r,function(t,r){return n(r,e)?(("image/tiff"!==t||qq.safari())&&(s=!0,i.success(t)),!1):void 0}),t(qq.format("'{}' is {} able to be rendered in this browser",o,s?"":"NOT")),s||i.failure()}),i}})},qq.ImageValidation=function(e,t){"use strict";function n(e){var t=!1;return qq.each(e,function(e,n){return n>0?(t=!0,!1):void 0}),t}function r(){var n=new qq.Promise;return(new qq.Identify(e,t)).isPreviewable().then(function(){var r=new Image,i=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;i?(r.onerror=function(){t("Cannot determine dimensions for image.  May be too large.","error"),n.failure()},r.onload=function(){n.success({width:this.width,height:this.height})},r.src=i.createObjectURL(e)):(t("No createObjectURL function available to generate image URL!","error"),n.failure())},n.failure),n}function i(e,t){var n;return qq.each(e,function(e,r){if(r>0){var i=/(max|min)(Width|Height)/.exec(e),s=i[2].charAt(0).toLowerCase()+i[2].slice(1),o=t[s];switch(i[1]){case"min":if(r>o)return n=e,!1;break;case"max":if(o>r)return n=e,!1}}}),n}this.validate=function(e){var s=new qq.Promise;return t("Attempting to validate image."),n(e)?r().then(function(t){var n=i(e,t);n?s.failure(n):s.success()},s.success):s.success(),s}},qq.UiEventHandler=function(e,t){"use strict";function n(e){r.attach(e,i.eventType,function(e){e=e||window.event;var t=e.target||e.srcElement;i.onHandled(t,e)})}var r=new qq.DisposeSupport,i={eventType:"click",attachTo:null,onHandled:function(){}};qq.extend(this,{addHandler:function(e){n(e)},dispose:function(){r.dispose()}}),qq.extend(t,{getFileIdFromItem:function(e){return e.qqFileId},getDisposeSupport:function(){return r}}),qq.extend(i,e),i.attachTo&&n(i.attachTo)},qq.FileButtonsClickHandler=function(e){"use strict";function t(e,t){qq.each(i,function(n,i){var s,o=n.charAt(0).toUpperCase()+n.slice(1);return r.templating["is"+o](e)?(s=r.templating.getFileId(e),qq.preventDefault(t),r.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",r.onGetName(s),s)),i(s),!1):void 0})}var n={},r={templating:null,log:function(){},onDeleteFile:function(){},onCancel:function(){},onRetry:function(){},onPause:function(){},onContinue:function(){},onGetName:function(){}},i={cancel:function(e){r.onCancel(e)},retry:function(e){r.onRetry(e)},deleteButton:function(e){r.onDeleteFile(e)},pause:function(e){r.onPause(e)},continueButton:function(e){r.onContinue(e)}};qq.extend(r,e),r.eventType="click",r.onHandled=t,r.attachTo=r.templating.getFileList(),qq.extend(this,new qq.UiEventHandler(r,n))},qq.FilenameClickHandler=function(e){"use strict";function t(e,t){if(r.templating.isFileName(e)||r.templating.isEditIcon(e)){var i=r.templating.getFileId(e),s=r.onGetUploadStatus(i);s===qq.status.SUBMITTED&&(r.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",r.onGetName(i),i)),qq.preventDefault(t),n.handleFilenameEdit(i,e,!0))}}var n={},r={templating:null,log:function(){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(){},onGetName:function(){}};qq.extend(r,e),r.eventType="click",r.onHandled=t,qq.extend(this,new qq.FilenameEditHandler(r,n))},qq.FilenameInputFocusInHandler=function(e,t){"use strict";function n(e){if(r.templating.isEditInput(e)){var n=r.templating.getFileId(e),i=r.onGetUploadStatus(n);i===qq.status.SUBMITTED&&(r.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",r.onGetName(n),n)),t.handleFilenameEdit(n,e))}}var r={templating:null,onGetUploadStatus:function(){},log:function(){}};t||(t={}),r.eventType="focusin",r.onHandled=n,qq.extend(r,e),qq.extend(this,new qq.FilenameEditHandler(r,t))},qq.FilenameInputFocusHandler=function(e){"use strict";e.eventType="focus",e.attachTo=null,qq.extend(this,new qq.FilenameInputFocusInHandler(e,{}))},qq.FilenameEditHandler=function(e,t){"use strict";function n(e){var t=u.onGetName(e),n=t.lastIndexOf(".");return n>0&&(t=t.substr(0,n)),t}function r(e){var t=u.onGetName(e);return qq.getExtension(t)}function i(e,t){var n,i=e.value;void 0!==i&&qq.trimStr(i).length>0&&(n=r(t),void 0!==n&&(i=i+"."+n),u.onSetName(t,i)),u.onEditingStatusChange(t,!1)}function s(e,n){t.getDisposeSupport().attach(e,"blur",function(){i(e,n)})}function o(e,n){t.getDisposeSupport().attach(e,"keyup",function(t){var r=t.keyCode||t.which;13===r&&i(e,n)})}var u={templating:null,log:function(){},onGetUploadStatus:function(){},onGetName:function(){},onSetName:function(){},onEditingStatusChange:function(){}};qq.extend(u,e),u.attachTo=u.templating.getFileList(),qq.extend(this,new qq.UiEventHandler(u,t)),qq.extend(t,{handleFilenameEdit:function(e,t,r){var i=u.templating.getEditInput(e);u.onEditingStatusChange(e,!0),i.value=n(e),r&&i.focus(),s(i,e),o(i,e)}})},function(e){"use strict";function t(e){if(e){var t=u(e),r=n(t);i(r),o(t,r)}return c}function n(e){var t=s("uploaderType"),n=s("endpointType");return t?(t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),n?new qq[n]["FineUploader"+t](e):new qq["FineUploader"+t](e)):n?new qq[n].FineUploader(e):new qq.FineUploader(e)}function r(e,t){var n=c.data("fineuploader");return t?(void 0===n&&(n={}),n[e]=t,c.data("fineuploader",n),void 0):void 0===n?null:n[e]}function i(e){return r("uploader",e)}function s(e,t){return r(e,t)}function o(t,n){var r=t.callbacks={};e.each(n._options.callbacks,function(t,n){var i,s;i=/^on(\w+)/.exec(t)[1],i=i.substring(0,1).toLowerCase()+i.substring(1),s=c,r[t]=function(){var t,r,o=Array.prototype.slice.call(arguments),u=[];e.each(o,function(e,t){u.push(l(t))}),t=n.apply(this,o);try{r=s.triggerHandler(i,u)}catch(a){qq.log("Caught error in Fine Uploader jQuery event handler: "+a.message,"error")}return null!=t?t:r}}),n._options.callbacks=r}function u(t,n){var r,i;return r=void 0===n?"basic"!==t.uploaderType?{element:c[0]}:{}:n,e.each(t,function(t,n){e.inArray(t,h)>=0?s(t,n):n instanceof e?r[t]=n[0]:e.isPlainObject(n)?(r[t]={},u(n,r[t])):e.isArray(n)?(i=[],e.each(n,function(t,n){var r={};n instanceof e?e.merge(i,n):e.isPlainObject(n)?(u(n,r),i.push(r)):i.push(n)}),r[t]=i):r[t]=n}),void 0===n?r:void 0}function a(t){return"string"===e.type(t)&&!t.match(/^_/)&&void 0!==i()[t]}function f(e){var t,n=[],r=Array.prototype.slice.call(arguments,1);return u(r,n),t=i()[e].apply(i(),n),l(t)}function l(t){var n=t;return null==t||"object"!=typeof t||1!==t.nodeType&&9!==t.nodeType||!t.cloneNode||(n=e(t)),n}var c,h=["uploaderType","endpointType"];e.fn.fineUploader=function(n){var r=this,s=arguments,o=[];return this.each(function(u,l){if(c=e(l),i()&&a(n)){if(o.push(f.apply(r,s)),1===r.length)return!1}else"object"!=typeof n&&n?e.error("Method "+n+" does not exist on jQuery.fineUploader"):t.apply(r,s)}),1===o.length?o[0]:o.length>1?o:this}}(jQuery),function(e){"use strict";function t(e){e||(e={}),e.dropZoneElements=[a];var t=s(e);return i(t),r(new qq.DragAndDrop(t)),a}function n(e,t){var n=a.data(f);return t?(void 0===n&&(n={}),n[e]=t,a.data(f,n),void 0):void 0===n?null:n[e]}function r(e){return n("dndInstance",e)}function i(t){{var n=t.callbacks={};new qq.FineUploaderBasic}e.each(new qq.DragAndDrop.callbacks,function(e){var t,r=e;t=a,n[e]=function(){var e=Array.prototype.slice.call(arguments),n=t.triggerHandler(r,e);return n}})}function s(t,n){var r,i;return r=void 0===n?{}:n,e.each(t,function(t,n){n instanceof e?r[t]=n[0]:e.isPlainObject(n)?(r[t]={},s(n,r[t])):e.isArray(n)?(i=[],e.each(n,function(t,n){n instanceof e?e.merge(i,n):i.push(n)}),r[t]=i):r[t]=n}),void 0===n?r:void 0}function o(t){return"string"===e.type(t)&&"dispose"===t&&void 0!==r()[t]}function u(e){var t=[],n=Array.prototype.slice.call(arguments,1);return s(n,t),r()[e].apply(r(),t)}var a,f="fineUploaderDnd";e.fn.fineUploaderDnd=function(n){var i=this,s=arguments,f=[];return this.each(function(l,p){if(a=e(p),r()&&o(n)){if(f.push(u.apply(i,s)),1===i.length)return!1}else"object"!=typeof n&&n?e.error("Method "+n+" does not exist in Fine Uploader's DnD module."):t.apply(i,s)}),1===f.length?f[0]:f.length>1?f:this}}(jQuery)